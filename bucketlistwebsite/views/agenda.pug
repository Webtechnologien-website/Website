extends layout

block content
  h1= title
  if user
    p Welcome to your agenda, #{user.first_name} #{user.family_name}. Here, you can view and manage your upcoming activities.
  else
    p Welcome to your agenda. Here, you can view and manage your upcoming activities.

  div#calendar(style="margin: 20px 0; height: 600px;")

  //- Include FullCalendar dependencies (updated paths)
  script(src="/fullcalendar/core/index.global.min.js")
  script(src="/fullcalendar/daygrid/index.global.min.js")
  
  //- Add some basic styling for the calendar
  style.
    #calendar {
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px;
    }

  script.
    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,dayGridWeek,dayGridDay'
        },
        height: 'auto',
        events: !{JSON.stringify(agendaItems)}
      });
      calendar.render();
    });